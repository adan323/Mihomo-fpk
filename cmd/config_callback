#!/bin/bash

# 配置更新回调脚本
# 在用户修改应用设置后调用，重启应用使配置生效

# 检查应用是否正在运行
if ${TRIM_APPSRC}/cmd/main status > /dev/null 2>&1; then
    # 应用正在运行，先停止再启动以应用新配置
    ${TRIM_APPSRC}/cmd/main stop
    sleep 2
    ${TRIM_APPSRC}/cmd/main start
    if [ $? -ne 0 ]; then
        echo "Failed to restart application" > "${TRIM_TEMP_LOGFILE}"
        exit 1
    fi
fi

exit 0